---
layout: post
title:  vera 3.0.0 api
category: api
description: vera 3.0.0版本的api文档
---

## 写在前面

### 命名规则

为了和相近的开源产品命名保持一致或者相近，vera 库样式或者变量命名规则参考 bootstrap 和 ionic 。

### 使用方法

vera 依赖 zepto.js 或者 jquery，就像 bootstrap 依赖 jquery 一样，在引入 vera.js前，请务必先引入 zepto.js 或者 jquery。建议是用 jquery 3.0.0 。 如果想屏蔽 click 300ms 延迟，根据需要引入 fastclick.js 。

具体code

	<script type="text/javascript" src="path/jquery.3.0.0.js"></script>
	<script type="text/javascript" src="path/vera.js"></script>

## 字体 font

目前库支持的字体都列在下面的页面，根据开发迭代进行，会持续增加字体库。说明，UI 提供的 svg 必须是 AI 导出，Sketch 出的图无法正常打包到字体库。图标的 svg 标签务必只能有 path g 基础标签，不能含有其他高级图像标签。

效果如下

[字体 font](http://wikieswan.github.io/vera3/example/index.html#font)

<iframe src="http://wikieswan.github.io/vera3/example/index.html#font"
 style="width:375px; height: 667px;width:375px; height: 667px;border: 2px solid #ddd;border-bottom: 50px solid #6D6767;border-top: 50px solid #6D6767;border-radius: 10px;"></iframe>



## 布局 layout

效果如下

[布局 layout](http://wikieswan.github.io/vera3/example/index.html#layout)

<iframe src="http://wikieswan.github.io/vera3/example/index.html#layout"
 style="width:375px; height: 667px;width:375px; height: 667px;border: 2px solid #ddd;border-bottom: 50px solid #6D6767;border-top: 50px solid #6D6767;border-radius: 10px;"></iframe>

布局使用栅格系统，和bootstrap相似，不过vera 采用的是 10 列结构 。语法结构如下

	<div class="container">
		<div class="row">
			<div class="col"></div>
		</div>
	</div>

页面所有内容，都报过在 	```container``` 下面。 ```row``` 表示行。行距默认是 0 ，如果想控制行距，包括行与行之间的距离、行与页面左右两侧的距离，可以通过下面的样式类来控制。

### 行与页面左右两侧的距离

	.padding-h-10 //行到页面左右两侧间距 10px
	.padding-h-15
	.padding-h-20
	.padding-h-25
	.padding-h-30
	.padding-h-left-null //行到页面左侧间距 0
	.padding-h-right-null//行到页面右侧间距 0



### 行与行之间的距离
	
	.margin-v-10	//行的上下margin是 10px
	.margin-v-15
	.margin-v-20
	.margin-v-25
	.margin-v-30
	.margin-v-30
	.margin-v-40
	.margin-v-50
	.margin-v-top-null		//行的上margin是 0
	.margin-v-bottom-null	//行的下margin是 0


### 列 col

	.col 		//列的宽度占整行的 100%
	.col-10		//列的宽度占整行的 10%
	.col-20
	.col-25
	.col-30
	.col-33
	.col-40
	.col-50
	.col-60
	.col-67
	.col-70
	.col-75
	.col-80
	.col-90


正常情况下，这种布局风格可以满足大部分页面布局。


## 按钮 button

效果如下

[按钮 button](http://wikieswan.github.io/vera3/example/index.html#button)

<iframe src="http://wikieswan.github.io/vera3/example/index.html#button"
 style="width:375px; height: 667px;border: 2px solid #ddd;border-bottom: 50px solid #6D6767;border-top: 50px solid #6D6767;border-radius: 10px;"></iframe>

### 用法

	//普通短按钮
	<button class="btn btn-basic">按钮</button> 
	<button class="btn btn-basic" disabled>按钮</button>

	//红色边框按钮
	<button class="btn btn-border">按钮</button>
	<button class="btn btn-border" disabled>按钮</button>

	//灰色边框按钮
	<button class="btn btn-border btn-border-grey">按钮</button>
	<button class="btn btn-border btn-border-grey" disabled>按钮</button>

	//红色边框按钮的三个不同尺寸
	<button class="btn btn-border">按钮</button>
	<button class="btn btn-border btn-small">按钮</button>
	<button class="btn btn-border btn-mini">按钮</button>

	//红色整行按钮
	<button class="btn btn-basic btn-full">按钮</button>
	<button class="btn btn-basic btn-full" disabled>按钮</button>

### 方法

	/***
		param: {
			target: '#myBtnId' // '.myBtnId'
		}
		return bool,返回目标 button 是否为 disabled 状态，true 是 disabled 状态
	*/
	getButtonStatus(param)
	获取按钮是否为 disabled 状态


	/***
		param: {
			target: '#myBtnId', // '.myBtnId'
			disabled: false / true
		}
		return void
	*/
	setButtonStatus(param)
	设置按钮的状态

### 用例

	$('#J-btn-switch').click(function(){
		var isdisabled  = vera.getButtonStatus({target:'.J-btn-status'})
		if(isdisabled){
			vera.setButtonStatus({
				target: '.J-btn-status',
				disabled: false
			})
		}
		else{
			vera.setButtonStatus({
				target: '.J-btn-status',
				disabled: true
			})
		}
	})


## hercules polyfill 

h5 页面常用的场景是嵌入特卖会的 app 中。嵌入特卖会的app的h5页面，如果需要和app交互，就需要引入 Hercules 库。一般为了更好的交互效果，对于嵌入app的h5页面，我们会选择优先使用app提供的交互组件，比如：loading、dialog、toast。

为了能保证同样的写法能再app和浏览器中同时能使用，我们开发了一个叫做 hercules.polyfill.js 的库，弥补了app和浏览器调用这些组件的鸿沟。 

- 注意，hercules.polyfill.js 可以单独使用，不依赖 vera 、jquery 或者 zepto。



### 使用方法

引入app那边提供的 hercules.js，然后引入 hercules.polyfill.js

	<script type="text/javascript" src="path/to/hercules.js"></script>
	<script type="text/javascript" src="path/to/hercules.polyfill.js"></script>
	<script type="text/javascript">
		//入口文件出，判断h5所在的环境，给 hercules.polyfill.js 传递标志
		// 一般是根据 url 中是否含有 特卖会 对url的处理 source=app
		//如果没有这个处理，默认是 h5
		var isInApp = xxxx 
		VHPF.ui.env = isInApp?'app':'h5'
		//之后 VHPF 会根据 VHPF.ui.env ，选择是否使用特卖会的 ui 组件
	</script>

关于特卖会提供的 hercules.js 详细信息，可以参考下面的链接

hercules 相关的文档

[http://wiki.corp.vipshop.com/pages/viewpage.action?pageId=91001767](http://wiki.corp.vipshop.com/pages/viewpage.action?pageId=91001767)

[http://wiki.corp.vipshop.com/pages/viewpage.action?pageId=74752365&src=search](http://wiki.corp.vipshop.com/pages/viewpage.action?pageId=74752365&src=search)

[http://gitlab.tools.vipshop.com/h5_dev/hercules/blob/master/1/index.js](http://gitlab.tools.vipshop.com/h5_dev/hercules/blob/master/1/index.js)

### 效果如下

[hercules.polyfill.js](http://wikieswan.github.io/vera3/example/index.html#herculespolyfill)

<iframe src="http://wikieswan.github.io/vera3/example/index.html#herculespolyfill"
 style="width:375px; height: 667px;border: 2px solid #ddd;border-bottom: 50px solid #6D6767;border-top: 50px solid #6D6767;border-radius: 10px;"></iframe>



### api

+ 1 Toast
	
	//显示一个 toast 3s 消失
	VHPF.ui.showToast({
		content: '修改密码成功'
	})


+ 2 Loading

	VHPF.ui.showLoading() //显示loading 

	VHPF.ui.hideLoading() //隐藏loading

+ 3 Dialog

	//显示一个底部有两个按钮的 dialog
	var param ={
        content: "为了你的账户安全，请先进行实名认证",
        buttonType: "BUTTON_TYPE_LEFTRIGHT",//BUTTON_TYPE_CENTER BUTTON_TYPE_LEFTRIGHT
        buttonLeftText: "取消",
        buttonLeftEventMethod: function(){},
        buttonRightText: "去认证",
        buttonRightEventMethod: function(){
        	alert("去认证")
        }
    }
    VHPF.ui.showDialog(param)

    //显示一个底部有一个按钮的 dialog 
	var param ={
        content: "网络异常，请重试",
        buttonType: "BUTTON_TYPE_CENTER",//BUTTON_TYPE_CENTER BUTTON_TYPE_LEFTRIGHT
        buttonCenterText: "取消",
        buttonCenterEventMethod: function(){}
    }
    VHPF.ui.showDialog(param)

+ 4 nav

嵌入特卖会app 的页面跳转是不能使用 location.href = 'xxxx' 来进行页面跳转的。前端必须模拟一个 a 标签的点击事件来进行跳转，否则页面跳转后表现是不正常的。为了更加方便页面跳转， VHPF 还提供一个跳转函数

	//url 可以是一个 h5 url 地址或者是 -1
	VHPF.nav.goto(url)












