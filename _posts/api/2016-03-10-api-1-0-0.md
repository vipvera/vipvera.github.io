---
layout: post
title:  vera 1.0.0 api
category: api
description: vera 1.0.0版本的api文档
---

## 概述

vera 是以H5收银台为基础开发的一套微型H5前端UI组件库，目前包括的组件有：字体、标题、脚手架、banner、按钮、checkbox、文本输入框、列表、tab页、弹窗。组件在不断完善中。

## 兼容性

	iOS 5+ Safari
	Android 2.3+ Browser
	Internet Explorer 10+ (Windows, Windows Phone)
	UC手机浏览器
	QQ手机浏览器

## UI效果



## API

### 脚手架

脚手架的结构如下：

	<div class="container">
		<div class="row">
			<div class="col"></div>
		</div>
	</div>


```<div class="container">``` 为最外层容器；

```<div class="row">``` 为行级；

```<div class="col">``` 为列级。

```<div class="row">``` 的宽度是整个屏幕宽度的100%；对于不需要满屏的行，可以使用 ```<div class="row row-padding">``` ，这样横向会有 1rem 的空余。如果这种padding不能满足需求，可以自定义横向padding数值。

```<div class="col">``` 默认宽度是 100% ；为了适应各种宽度需求，提供了各种百分比宽度的 col ：

	col-10
	col-20
	col-25
	col-30
	col-33
	col-40
	col-50
	col-60
	col-67
	col-70
	col-75
	col-80
	col-90

用法：

	<div class="row">
		<div class="col col-10"></div>
		<div class="col col-10"></div>
		<div class="col col-10"></div>
		<div class="col col-10"></div>
		<div class="col col-10"></div>
		<div class="col col-10"></div>
		<div class="col col-10"></div>
		<div class="col col-10"></div>
		<div class="col col-10"></div>
		<div class="col col-10"></div>
	</div>

脚手架目的是为了适应各种形式的布局。



### banner

banner 的作用是用来展示必要的通知信息。

	<!-- banner -->
	<div class="row demo-pading-top">
		<div class="col">
			<div class="banner">这是一个默认的 banner 条</div>
		</div>
	</div>

	<div class="row row-padding demo-pading-top">
		<div class="col">
			<div class="banner">这是一个 带横向 padding banner 条</div>
		</div>
	</div>

### 页面头部

页面的头部，包括标题、返回、操作等区域

基本用法：

	<div class="head">
		<span class="h1">这是标题</span>
	</div>

完整用法：

	<div class="head">
		<a class="left-option back"  href="javascript:window.history.back();">
			<i class="icon-chevron icon-chevron-left"></i>
		</a>
		<span class="h1">快捷支付</span>
		<a class="right-option close">关闭</a>
	</div>

.left-option .right-option 会在头部左右两侧分别预留出来一块区域，用来做其他业务。

```<span class="h1">快捷支付</span>``` 头部显示的文本， .h1 .h2分别用作大小标题；这里用户可以自己定义文本大小。


### 按钮

按钮可以用 button 和 a 标签，样式用 .btn

	<button class="btn btn-default">这是个按钮 btn-default</button>

	<button class="btn btn-red">这是个按钮 btn-red</button>
	
	<button class="btn btn-disabled">这是个按钮 btn-disabled</button>

.btn 有3个样式： .btn-default .btn-red .btn-disabled 

.btn 的宽度是父级宽度的100%；所以可以通过控制父级的宽度来设置btn的宽度。


ps：以下是vpalmobileui JavaScript组件，需要引入vpal.ui.js 文件，它依赖zepto.js、zepto.fx.js、zepto.touch.js;

### checkbox 

checkbox 有3种状态，分别是默认、选中、不可用；对应的样式分别是：

```.checkkbox-default``` ```.checkkbox-selected``` ```.checkkbox-disabled```

在 ```.checkbox``` 加上 ```role="checkbox"``` 属性，可以自动响应用户touch；

	<div class="row row-padding">
		<div class="col">
			<div class="checkbox checkkbox-selected" role="checkbox">
				<i class="icon-tick"></i>
			</div>
			<lable>这是个checkbox</lable>
		</div>
	</div>

checkbox 对外提供3个js接口：

+ $.checkbox.get(selector)

获取某个```.checkbox```的值，返回true或者false

+ $.checkbox.set(selector,value)

设置某个```.checkbox```的值，value是true或者false

+ $.checkbox.toggle(selector)

切换某个```.checkbox```


### input 文本输入

文本输入，典型的分为3列和2列两种类型


2列结构



	<div class="ipt-controll">
		<div class="ipt-holder">
			<div class="ipt-2-left">
				<span>银行卡号</span>
			</div>
			<div class="ipt-2-right">
				<input class="v-ipt" type="tel" id="cardNo" data-validate="0"
					placeholder="请输入您本人信用卡或储蓄卡卡号" />
				<i class="icon-delet del hide"></i>		
			</div>
		</div>
	</div>
		


3列结构



	<div class="ipt-controll">
		<div class="ipt-holder">
			<div class="ipt-2-left">
				<span>支付密码</span>
			</div>
			<div class="ipt-2-right">
				<input class="v-ipt" type="password" id="payPass"
				placeholder="请输入支付密码" />
				<i class="icon-delet del hide"></i>	
			</div>
		</div>
	</div>
	

其中注意 input 标签有个兄弟节点 i ，这是一个删除用户输入的按钮，可以清除用户输入 

	<input class="v-ipt" type="password" id="payPass" placeholder="请输入支付密码" />
	<i class="icon-delet del hide"></i>	

### tabs页

tabs组件由tabs和tab-content组成，具体写法如下：

	<div class="tabs">
		<div data-tab="left"  class="tab tab-left active">信用卡</div>
		<div data-tab="right" class="tab tab-right">储蓄卡</div>
	</div>
	<div class="tab-content">
		<div data-pannel="left">
			<div class="row row-padding">
				tab 1 内容
			</div>
		</div>
		<div data-pannel="right" class="hide">
			<div class="row row-padding">
				tab 2 内容
			</div>
		</div>
	</div>

### list

	<div class="list">
		<div class="item">路人甲 1</div>
		<div class="item active">路人甲 2</div>
		<div class="item">路人甲 3</div>
		<div class="item">路人甲 4</div>
		<div class="item">路人甲 5</div>
		<div class="item">路人甲 5</div>
		<div class="item">路人甲 6</div>
		<div class="item">路人甲 7</div>
	</div>


### modal

modal弹窗，以右侧向左侧方向进入，关闭时反向。
弹窗有两种方式控制，分别

+ 在DOM中利用标签属性控制

	data-modal="#someFullpageModal" data-action="show"

data-modal属性指向弹窗的#id

data-action表示对modal的操纵类型，有show或者hide

+ 在js代码中控制

	$('#someFullpageModal').modal('show');

$().modal()函数接受一个参数，表示打开或者关闭modal，'show'、'hide'。


代码如下：


	<button class="btn btn-red" id="openModal" role="button" >js控制</button>

	<button class="btn btn-red" role="button"  data-modal="#someFullpageModal" data-action="show">dom属性控制</button>

	<div class="modal-fullpage" id="someFullpageModal" role="dialog" >
		<div class="modal-header">
			<div class="head">
				<span class="h2">请选择银行卡</span>
				<a class="right-option close" role="button" 
					data-modal="#someFullpageModal" data-action="hide">关闭</a>
			</div>
		</div>
		<div class="modal-body">
			<div class="list">
				<div class="item">新弹窗，第一个</div>
				<div class="item">新弹窗，这是个list哦</div>
				<div class="item">新弹窗，这是个list哦</div>
				<div class="item">新弹窗，这是个list哦</div>
				<div class="item">新弹窗，这是个list哦</div>
				<div class="item">新弹窗，这是个list哦</div>
				<div class="item">新弹窗，这是个list哦</div>
				<div class="item">新弹窗，这是个list哦</div>
				<div class="item">新弹窗，这是个list哦</div>
				<div class="item">新弹窗，这是个list哦</div>
				<div class="item">新弹窗，这是个list哦</div>
				<div class="item">新弹窗，这是个list哦</div>
				<div class="item">新弹窗，这是个list哦</div>
				<div class="item">新弹窗，这是个list哦</div>
				<div class="item">新弹窗，这是个list哦</div>
				<div class="item">新弹窗，这是个list哦</div>
				<div class="item">新弹窗，这是个list哦</div>
				<div class="item">新弹窗，这是个list哦</div>
				<div class="item">新弹窗，这是个list哦</div>
				<div class="item">新弹窗，这是个list哦</div>
				<div class="item">新弹窗，这是个list哦</div>
				<div class="item">新弹窗，这是个list哦</div>
				<div class="item">新弹窗，最后一个</div>
			</div>
		</div>
	</div>

	<script>
		$(function(){
			$('#openModal').on('tap',function(){
				$('#someFullpageModal').modal('show');
			});
		});
	</script>


### $.trace(text,fn,time)

参数：

+ text 

必须，展示文本

+ fn

非必须，回调函数

+time

非必须，多久后消失弹窗


小弹框，提示用处。用法：
	
	//用法1
	$.trace('你好啊！');

	//用法2
	$.trace('带回调函数的弹窗',function(){
		console.log('hello world')
	},3000);


## Dialog

### 方法 vera.Dialog(data)

### 参数 

	data : 可选，有默认值
	数据格式：
	{ 
	 	id:"test001", //可选
		title:"这是标题", //可选
		body:"这是内容区域"//必选
		footer:{cancel:"取消",ok:"确定"}, //可选，也可单选
		event:{ //可选
			show: function(){
				console.log("show1");
			},
			hide: function(){
				console.log("hide1");
			},
			cancel: function(){
				console.log("cancel1");
			},
			ok: function(){
				console.log("ok1");
			}
		}
		type:"blue"// 可选，默认是普通dialog
	};
 	
### 说明

 创建dialog并注册事件，返回当前dialog实例

### 方法 $dialog.dialog(action, callback)

### 参数 

 	action:必选，string "hide", "show", "cancel", "ok"
	callback:可选，无默认值
	
### 说明

 操作dialog的隐藏，显示，取消，确定

 方法名 | 参数 | 返回值
 ----|----|----
 $dialog.dialog(action, callback) | action string, callback function | 无


### 用法

#### 1. 动态创建dialog

	<script>
		// dialog
		var data ={ 
				 	id:"test001", //可选
					title:"这是标题", //可选
					body:"这是内容区域"//必选
					footer:{cancel:"取消",ok:"确定"}, //可选，也可单选
					event:{ //可选
						show: function(){
							console.log("show1");
						},
						hide: function(){
							console.log("hide1");
						},
						cancel: function(){
							console.log("cancel1");
						},
						ok: function(){
							console.log("ok1");
						}
					}
					type:"blue"// 可选，默认是普通dialog, blue特指蓝色弹出框
				};
		var dialog = vera.Dialog(data);
		dialog.dialog("show");
	</script>

#### 2. HTML代码片段添加普通dialog

	<div class="dialog-overlay" id='dialog_test'  role="dialog">
		<div class="dialog-container">
			<div class="dialog-table-row">
				<div class="dialog-table-cell">
					<div class="dialog-content">
						<div class="dialog-header">
							<div class="dialog-title">
								<span class="title">温馨提示(这是标题)</span>
								<a href="javascript:void(0)" class="close-btn" data-dialog data-action="hide" >
									<i class="icon-cross "  ></i>
								</a>
							</div>
						</div>
						<div class="dialog-body">
							<div class="list " id="J-list-touch-test">
							<div class="item" data-hover="">路人甲 1</div>
							<div class="item active" data-hover="">路人甲 2</div>
							<div class="item" data-hover="">路人甲 3</div>
							<div class="item" data-hover="">路人甲 4</div>
						</div>
						</div>
						<div class="dialog-footer">
							<a class="col col-50 dialog-action action-left" data-dialog data-action="cancel">
								取消
							</a>
							<a class="col col-50 dialog-action action-right" data-dialog data-action="ok">
								确定
							</a>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

#### 3. HTML代码片段添加蓝色dialog

	<div class="dialog-overlay blue-overlay" id='dialog_test'  role="dialog">
		<div class="dialog-container">
			<div class="dialog-table-row">
				<div class="dialog-table-cell">
					<div class="dialog-content">
						<div class="dialog-header">
							<div class="dialog-title">
								<span class="title">温馨提示(这是标题)</span>
								<a href="javascript:void(0)" class="close-btn" data-dialog data-action="hide" >
									<i class="icon-cross "  ></i>
								</a>
							</div>
						</div>
						<div class="dialog-body">
							<div class="list " id="J-list-touch-test">
							<div class="item" data-hover="">路人甲 1</div>
							<div class="item active" data-hover="">路人甲 2</div>
							<div class="item" data-hover="">路人甲 3</div>
							<div class="item" data-hover="">路人甲 4</div>
						</div>
						</div>
						<div class="dialog-footer">
							<a class="col col-50 dialog-action action-left" data-dialog data-action="cancel">
								取消
							</a>
							<a class="col col-50 dialog-action action-right" data-dialog data-action="ok">
								确定
							</a>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

## Switcher

### 方法 vera.Switcher(data)

### 参数 

	data : 可选，有默认值
	数据格式：
	{ 
	 	parent : "#J_switcher_wrapper",
		id     : "switcher_001" , 
		status : "on" ,
		events : {
			on : function( status ){
				console.log('script switch-btn on from init, status is' + status );
			}
			off : function( status ){
				console.log('script switch-btn off from init, status is' + status );
			},
			toggle : function( status ){
				console.log('script switch-btn toggle from init, status is' + status );
			}
		}
	};
 	
### 说明

 创建switcher并注册事件，返回当前switcher实例

### 方法 $switcher.switcher(action, callback(status))

### 参数 

 	action:必选，string "on", "off", "toggle"
	callback:可选，无默认值，可获取status当前状态作为回调参数
	
### 说明
	
	操作switcher的开、关或切换

方法名 | 参数 | 返回值
 ----|----|----
 $switcher.switcher(action, callback(status)) | action string, callback function | status

### 方法 $switcher.getStatus()

### 参数 

 	无
	
### 说明
	
	获取当前switcher状态"on"或"off"

### 用法

#### 1. 动态创建switcher

	<script>
		// switcher
		var data = { 
					parent : "#J_switcher_wrapper",         //可选，父节点，不设则生成在body上
					id     : "switcher_001" , 				//可选，不设可自动生成随机id
					status : "on" ,                         //可选，状态 on/off，不设默认为关off
					events : {							    //可选，事件监听回调
						on : function(){
							console.log('the switcher on');
						},
						off : function(){
							console.log('script switch-btn off from init');
						},
						toggle: function(){
							console.log('script switch-btn toggle from init');
						}
					}
			};
		var switcher = vera.Switcher(data);

		//script脚本生成的swithcer可外部控制变换状态
		switcher.switcher("on");

		//回调函数可选
		switcher.switcher("off" , function(){
			console.log('script switch-btn off via others');
		});

		//回调函数参数可选
		switcher.switcher("toggle" , function(status){
			console.log('script switch-btn toggle via others, status to ' + status);
		});

		//手动注册script生成的开关事件：switcher:on,switcher:off和switcher:toggle，自定义回调
		switcher.on( 'switcher:on' , function( event, status ){
			console.log('script switch-btn on from event, get status from event: ' + status + ', or from api getStatus:' + switcher.getStatus() );
		});
	</script>

#### 2. HTML代码片段添加switcher, 有"checked"为on状态,无则为off状态

	<div class="onoffswitch" id="J_switcher_test">
	    <input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" checked>
	    <label class="onoffswitch-label" for="myonoffswitch">
	        <span class="onoffswitch-inner"></span>
	        <span class="onoffswitch-switch"></span>
	    </label>
	</div>

	//html的swithcer可外部控制变换状态
	$('#J_opt_switch').tap( function(){
    	$('#J_switcher_test').switcher('on');
    });

    $('#J_opt_switch').tap( function(){
    	$('#J_switcher_test').switcher( 'off' , function(){
    		console.log('dom switch-btn off via others');
    	});
    });

    $('#J_opt_switch').tap( function(){
    	$('#J_switcher_test').switcher( 'toggle' , function( status ){
    		console.log('dom switch-btn toggle via others, status to ' + status + ', or from api getStatus' +  $(this).getStatus());
    	});
    });

    //手动注册html生成的开关事件：switcher:on,switcher:off和switcher:toggle，自定义回调
    $('#J_switcher_test').on( 'switcher:toggle' , function( event , status ){
		console.log('dom switch-btn toggle, status to:' + status );
	});

#### 3. 动态脚本创建的swticher和HTML添加的switcher都可使用getStatus()获取当前状态
	switcher.getStatus();
	$('#J_switcher_test').getStatus();

## Timer

### 方法 vera.Timer.countDown60s($parent)

### 参数 

	$parent : 生成倒计时的父节点容器
 	
### 说明

    创建倒计时60秒

### 用法

#### 1. 动态创建倒计时60s

	<div class="row row-padding demo-pading-top">
		<div class="col">
			<a id="J_timer_wrapper"></a>
		</div>
	</div>
	<script>
		vera.Timer.countDown60s($('#J_timer_wrapper'));
	</script>

## Radio

### 方法 $radiogroup.getSelectedRadioItem()

### 参数 

	无
 	
### 说明

    取单选组当前选中项，返回整个.ui-radio-item的dom对象

### 方法 $radiogroup.setRadio()

### 参数 

	无
 	
### 说明

    选中当前不为disabled的单选项

### 方法 $radiogroup.getRadio()

### 参数 

	无
 	
### 说明

    当前单选项是否是选中，返回true或false

### 方法 $radiogroup.setRadioDisabled()

### 参数 

	无
 	
### 说明

    设置当前单选项失效disabled

### 用法

#### 1. HTML代码添加radiogroup，状态为checked的为选中项，状态为disabled的为失效项

	<div class="row row-padding demo-pading-top" style="background-color:white">
		<div class="col ui-radio-group" id="J_radio_group">
			<div class="ui-radio-item">
				<span class="ui-radio">
					<input type="radio" id="item1" name="item1" class="ui-radio-normal">
					<label for="item1" class="ui-radio-simulation"></label>
				</span>
				<label for="item1" class="ui-label">我是选项1</label>
			</div>
			<div class="ui-radio-item">
				<span class="ui-radio">
					<input type="radio" id="item2" name="item2" class="ui-radio-normal" checked="">
					<label for="item2" class="ui-radio-simulation"></label>
				</span>
				<label for="item2" class="ui-label">我是选项2</label>
			</div>
			<div class="ui-radio-item">
				<span class="ui-radio">
					<input type="radio" id="item3" name="item3" class="ui-radio-normal" disabled="">
					<label for="item3" class="ui-radio-simulation"></label>
				</span>
				<label for="item3" class="ui-label f-not-allowed">我是选项3</label>
			</div>
			<div class="ui-radio-item">
				<span class="ui-radio">
					<input type="radio" id="item4" name="item4" class="ui-radio-normal" disabled="" checked="">
					<label for="item4" class="ui-radio-simulation"></label>
				</span>
				<label for="item4" class="ui-label f-not-allowed">我是选项4</label>
			</div>
		</div>
	</div>

#### 2. getSelectedRadioItem()获取单选组当前选中的.ui-radio-item对象
	<script>
		//获取组选中的单选项，返回值是整个.ui-radio-item 对象
		var sr = $('#J_radio_group').getSelectedRadioItem();
		consoole.log('选中的radio是  id:' + sr.find('.ui-radio input').attr('id') + ',值:' +  sr.find('.ui-label').text());
	</script>

#### 3. setRadio()为当前单选项的状态更改为选中状态，但此单选不可为失效选项
	<script>
		$('#item1').setRadio();
	</script>

#### 4. getRadio()返回当前单选项的是否选中状态，返回值true或false
	<script>
		$('#item1').getRadio();
	</script>

#### 5. setRadioDisabled()设置当前单选项为失效状态
	<script>
		$('#item1').setRadioDisabled();
	</script>
